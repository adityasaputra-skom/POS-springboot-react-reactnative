{"ast":null,"code":"import _defineProperty from\"/home/aditya/Documents/github/bootcamp/ReactJS/web-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/home/aditya/Documents/github/bootcamp/ReactJS/web-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"/home/aditya/Documents/github/bootcamp/ReactJS/web-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/aditya/Documents/github/bootcamp/ReactJS/web-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _createSuper from\"/home/aditya/Documents/github/bootcamp/ReactJS/web-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import _inherits from\"/home/aditya/Documents/github/bootcamp/ReactJS/web-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component}from\"react\";import Header from\"../../../component/header\";import{TextField,withStyles,CircularProgress}from\"@material-ui/core\";import{findItemById,saveItems}from\"../../../action/items\";import{connect}from\"react-redux\";import{Container}from\"semantic-ui-react\";import styles from\"./styles\";import Snackbar from\"@material-ui/core/Snackbar\";import Alert from\"@material-ui/lab/Alert\";export var ItemPage=/*#__PURE__*/function(_Component){_inherits(ItemPage,_Component);var _super=_createSuper(ItemPage);function ItemPage(props){var _this;_classCallCheck(this,ItemPage);_this=_super.call(this,props);_this.onBack=function(event){event.preventDefault();var history=_this.props.history;history.push(\"/items\");};_this.onChange=function(event){// fungsi untuk menangi perubahan\nvar _event$target=event.target,name=_event$target.name,value=_event$target.value;var form=_this.state.form;_this.setState({form:_objectSpread({},form,_defineProperty({},name,value))});};_this.onSubmit=function(event){// untuk menangani ketika data itu disubmit\nevent.preventDefault();_this.props.saveItems(_this.state.form);console.log(_this.state);};var match=_this.props.match;_this.state={// ada component yang membutuhkan state tapi dia doang yang butuh.\nform:{id:match.params.id,name:\"\"},error:false};return _this;}_createClass(ItemPage,[{key:\"onsave\",value:function onsave(){this.props.history.push(\"items\");}},{key:\"componentDidMount\",value:function componentDidMount(){// metode yang dipanggil setelah komponen dipasang (dirender)\nvar form=this.state.form;if(form.id){this.props.findItemById(form.id);}}},{key:\"componentDidUpdate\",value:function componentDidUpdate(prevProps,prevState){// untuk dijalankan ketika halaman di render ulang atau di refresh\nvar _this$props=this.props,saveData=_this$props.saveData,data=_this$props.data,error=_this$props.error,saveError=_this$props.saveError,history=_this$props.history;if(prevProps.data!=data){this.setState({form:data});}else if(prevProps.saveError!==saveError){this.setState({error:saveError});}else if(prevProps.error!==error){this.setState({error:error});}else if(saveData&&prevProps.saveData!==saveData){history.goBack();}}},{key:\"render\",value:function render(){var _this2=this;// menampilkan\nvar _this$props2=this.props,classes=_this$props2.classes,loading=_this$props2.loading,saveError=_this$props2.saveError;var _this$state=this.state,form=_this$state.form,error=_this$state.error;var errorData=(saveError===null||saveError===void 0?void 0:saveError.data)||{};return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Header,null,/*#__PURE__*/React.createElement(Container,null,!loading?/*#__PURE__*/ //jika tidak loading maka tampilkan\nReact.createElement(\"form\",{noValidate:true,autoComplete:\"off\",onSubmit:this.onSubmit},(form===null||form===void 0?void 0:form.id)&&/*#__PURE__*/React.createElement(\"div\",{className:classes.formField},/*#__PURE__*/React.createElement(TextField,{id:\"id\",label:\"ID\",value:form===null||form===void 0?void 0:form.id,name:\"id\",variant:\"filled\",inputProps:{readOnly:true}})),/*#__PURE__*/React.createElement(\"div\",{className:classes.formField},/*#__PURE__*/React.createElement(TextField,{error:errorData.name,helperText:errorData.name?errorData.name[0]:null,id:\"name\",label:\"Name\",value:form===null||form===void 0?void 0:form.name,name:\"name\",variant:\"filled\",onChange:this.onChange,fullWidth:true})),/*#__PURE__*/React.createElement(\"div\",{className:classes.buttonContainer},/*#__PURE__*/React.createElement(\"button\",{className:\"ui orange button\",onClick:this.onBack},/*#__PURE__*/React.createElement(\"i\",{class:\"reply all icon\"}),\"Back\"),/*#__PURE__*/React.createElement(\"button\",{className:\"ui orange button\",type:\"submit\",disabled:loading},/*#__PURE__*/React.createElement(\"i\",{className:\"save icon\"}),\"Save\"))):/*#__PURE__*/ // else maka tampilkan\nReact.createElement(CircularProgress,null),/*#__PURE__*/React.createElement(Snackbar,{open:this.state.error,autoHideDuration:3000,onClose:function onClose(){return _this2.setState({error:false});}},/*#__PURE__*/React.createElement(Alert,{onClose:function onClose(){return _this2.setState({error:false});},elevation:6,variant:\"filled\",severity:\"error\"},error===null||error===void 0?void 0:error.message)))));}}]);return ItemPage;}(Component);var mapStateToProps=function mapStateToProps(state// state yang ada direducer dilempar untuk dijadikan props.\n){return console.log(state),{data:state.findItemById.data,loading:state.findItemById.loading||state.saveItems.loading,error:state.findItemById.error,saveSucces:state.saveItems.saveSucces,saveData:state.saveItems.data,saveError:state.saveItems.error};};var mapDispatchToProps={// fungsi yang ngedispatch actionnya untuk dipakai\nfindItemById:findItemById,saveItems:saveItems};export default withStyles(styles,{withTheme:true})(connect(mapStateToProps,mapDispatchToProps)(ItemPage));","map":{"version":3,"sources":["/home/aditya/Documents/github/bootcamp/ReactJS/web-client/src/scenes/item/detail/ItemPage.js"],"names":["React","Component","Header","TextField","withStyles","CircularProgress","findItemById","saveItems","connect","Container","styles","Snackbar","Alert","ItemPage","props","onBack","event","preventDefault","history","push","onChange","target","name","value","form","state","setState","onSubmit","console","log","match","id","params","error","prevProps","prevState","saveData","data","saveError","goBack","classes","loading","errorData","formField","readOnly","buttonContainer","message","mapStateToProps","saveSucces","mapDispatchToProps","withTheme"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport Header from \"../../../component/header\";\nimport { TextField, withStyles, CircularProgress } from \"@material-ui/core\";\nimport { findItemById, saveItems } from \"../../../action/items\";\nimport { connect } from \"react-redux\";\nimport { Container } from \"semantic-ui-react\";\nimport styles from \"./styles\";\nimport Snackbar from \"@material-ui/core/Snackbar\";\nimport Alert from \"@material-ui/lab/Alert\";\n\nexport class ItemPage extends Component {\n  constructor(props) {\n    super(props);\n    const { match } = this.props;\n    this.state = {\n      // ada component yang membutuhkan state tapi dia doang yang butuh.\n      form: {\n        id: match.params.id,\n        name: \"\"\n      },\n      error: false\n    };\n  }\n\n  onBack = event => {\n    event.preventDefault();\n    const { history } = this.props;\n    history.push(\"/items\");\n  };\n\n  onsave() {\n    this.props.history.push(\"items\");\n  }\n\n  componentDidMount() {\n    // metode yang dipanggil setelah komponen dipasang (dirender)\n    const { form } = this.state;\n    if (form.id) {\n      this.props.findItemById(form.id);\n    }\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    // untuk dijalankan ketika halaman di render ulang atau di refresh\n    const { saveData, data, error, saveError, history } = this.props;\n\n    if (prevProps.data != data) {\n      this.setState({ form: data });\n    } else if (prevProps.saveError !== saveError) {\n      this.setState({ error: saveError });\n    } else if (prevProps.error !== error) {\n      this.setState({ error: error });\n    } else if (saveData && prevProps.saveData !== saveData) {\n      history.goBack();\n    }\n  }\n\n  onChange = event => {\n    // fungsi untuk menangi perubahan\n    const { name, value } = event.target;\n    const { form } = this.state;\n    this.setState({ form: { ...form, [name]: value } });\n  };\n\n  onSubmit = event => {\n    // untuk menangani ketika data itu disubmit\n    event.preventDefault();\n    this.props.saveItems(this.state.form);\n    console.log(this.state);\n  };\n\n  render() {\n    // menampilkan\n    const { classes, loading, saveError } = this.props;\n    const { form, error } = this.state;\n    const errorData = saveError?.data || {};\n    return (\n      <div>\n        <Header>\n          <Container>\n            {!loading ? ( //jika tidak loading maka tampilkan\n              <form noValidate autoComplete=\"off\" onSubmit={this.onSubmit}>\n                {form?.id && (\n                  <div className={classes.formField}>\n                    <TextField\n                      id=\"id\"\n                      label=\"ID\"\n                      value={form?.id}\n                      name=\"id\"\n                      variant=\"filled\"\n                      inputProps={{ readOnly: true }}\n                    />\n                  </div>\n                )}\n                <div className={classes.formField}>\n                  <TextField\n                    error={errorData.name}\n                    helperText={errorData.name ? errorData.name[0] : null}\n                    id=\"name\"\n                    label=\"Name\"\n                    value={form?.name}\n                    name=\"name\"\n                    variant=\"filled\"\n                    onChange={this.onChange}\n                    fullWidth\n                  />\n                </div>\n                <div className={classes.buttonContainer}>\n                  <button className=\"ui orange button\" onClick={this.onBack}>\n                    <i class=\"reply all icon\"></i>\n                    Back\n                  </button>\n                  <button\n                    className=\"ui orange button\"\n                    type=\"submit\"\n                    disabled={loading}\n                  >\n                    <i className=\"save icon\"></i>\n                    Save\n                  </button>\n                </div>\n              </form>\n            ) : (\n              // else maka tampilkan\n              <CircularProgress />\n            )}\n            <Snackbar\n              open={this.state.error}\n              autoHideDuration={3000}\n              onClose={() => this.setState({ error: false })}\n            >\n              <Alert\n                onClose={() => this.setState({ error: false })}\n                elevation={6}\n                variant=\"filled\"\n                severity=\"error\"\n              >\n                {error?.message}\n              </Alert>\n            </Snackbar>\n          </Container>\n        </Header>\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = (\n  state // state yang ada direducer dilempar untuk dijadikan props.\n) => (\n  console.log(state),\n  {\n    data: state.findItemById.data,\n    loading: state.findItemById.loading || state.saveItems.loading,\n    error: state.findItemById.error,\n    saveSucces: state.saveItems.saveSucces,\n    saveData: state.saveItems.data,\n    saveError: state.saveItems.error\n  }\n);\n\nconst mapDispatchToProps = {\n  // fungsi yang ngedispatch actionnya untuk dipakai\n  findItemById,\n  saveItems\n};\n\nexport default withStyles(styles, { withTheme: true })(\n  connect(mapStateToProps, mapDispatchToProps)(ItemPage)\n);\n"]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"import _defineProperty from\"/home/aditya/Documents/github/bootcamp/ReactJS/web-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/home/aditya/Documents/github/bootcamp/ReactJS/web-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"/home/aditya/Documents/github/bootcamp/ReactJS/web-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/aditya/Documents/github/bootcamp/ReactJS/web-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _createSuper from\"/home/aditya/Documents/github/bootcamp/ReactJS/web-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import _inherits from\"/home/aditya/Documents/github/bootcamp/ReactJS/web-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component}from\"react\";import Header from\"../../component/header\";import MUIDataTable from\"mui-datatables\";import{findAll,deletedById}from\"../../action/items\";import{Container}from\"semantic-ui-react\";import{connect}from\"react-redux\";import{CircularProgress,withStyles}from\"@material-ui/core\";import styles from\"./styles\";var ItemPageList=/*#__PURE__*/function(_Component){_inherits(ItemPageList,_Component);var _super=_createSuper(ItemPageList);function ItemPageList(props){var _this;_classCallCheck(this,ItemPageList);_this=_super.call(this,props);_this.onReload=function(){_this.reload();};_this.reload=function(){_this.props.findAll(_this.state.table);};_this.onRowClick=function(rowData){_this.props.history.push(\"/items/\".concat(rowData[0]));};_this.onAdd=function(){_this.props.history.push(\"/items/add\");};_this.onChangeRowsPerPage=function(numbersOfRow){var table=_this.state.table;_this.setState({table:_objectSpread({},table,{size:numbersOfRow})});};_this.onChangePage=function(currentPage){var table=_this.state.table;_this.setState({table:_objectSpread({},table,{search:{name:currentPage}})});};_this.onSearchChange=function(searchText){var table=_this.state.table;_this.setState({table:_objectSpread({},table,{search:{name:searchText}})});};_this.onColumnSortChange=function(changedColumn,direction){var table=_this.state.table;var sort=direction===\"descending\"?\"desc\":\"asc\";_this.setState({table:_objectSpread({},table,{sort:sort})});};_this.onRowsDelete=function(rowsDeleted){var list=_this.props.data.list;var e=list[rowsDeleted.data[0].index];_this.props.deletedById(e.id);return false;};_this.state={data:[],total:0,table:{sort:\"asc\",size:20,page:0,search:{name:\"\"}},error:null};return _this;}_createClass(ItemPageList,[{key:\"componentDidMount\",value:function componentDidMount(){this.reload();}},{key:\"componentDidUpdate\",value:function componentDidUpdate(prevProps,prevState){var _this$props=this.props,deleteData=_this$props.deleteData,deleteError=_this$props.deleteError,error=_this$props.error,data=_this$props.data;var table=this.state.table;if(prevProps.data!==data){this.setState({data:data.list,total:data.total});}else if(prevState.table!==table||prevProps.deleteData!==deleteData){this.reload();}else if(deleteError&&prevProps.deleteError!==deleteError){this.setState({error:deleteError});}else if(error&&prevProps.error!==error){this.setState({error:error});}}},{key:\"render\",value:function render(){var _this$props2=this.props,classes=_this$props2.classes,loading=_this$props2.loading;var _this$state=this.state,data=_this$state.data,total=_this$state.total,error=_this$state.error,table=_this$state.table;var columns=[{name:\"id\",label:\"ID\",options:{sortDirection:table.sort}},{name:\"name\",label:\"Name\",options:{sort:false}}];var options={serverSide:true,page:table.page,filter:false,count:total,onRowsDelete:this.onRowsDelete,onRowClick:this.onRowClick,rowsPerPage:table.size,rowsPerPageOptions:[5,10,25,50,100],onChangeRowsPerPage:this.onChangeRowsPerPage,onChangePage:this.onChangePage,onSearchChange:this.onSearchChange,onColumnSortChange:this.onColumnSortChange,searchText:table.search.name,selectableRows:\"single\",textLabels:{body:{noMatch:loading?/*#__PURE__*/React.createElement(CircularProgress,null):\"Sorry, no matching records found\"}}};return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Header,{error:error},/*#__PURE__*/React.createElement(Container,null,/*#__PURE__*/React.createElement(\"div\",_defineProperty({className:\"ui button\",\"data-inverted\":\"\",\"data-tooltip\":\"Add your data\",\"data-position\":\"left center\",onClick:this.onAdd},\"className\",\"ui orange button\"),/*#__PURE__*/React.createElement(\"i\",{className:\"plus square outline icon\"}),\"New Item\"),/*#__PURE__*/React.createElement(\"div\",{style:{boxSizing:\"content-box\"}},/*#__PURE__*/React.createElement(MUIDataTable,{error:error,title:\"Items List\",data:!loading?data:[],columns:columns,options:options})),/*#__PURE__*/React.createElement(\"div\",{className:classes.buttonContainer},/*#__PURE__*/React.createElement(\"button\",{className:\"ui orange button\",onClick:this.reload,disabled:loading},/*#__PURE__*/React.createElement(\"i\",{className:\"sync icon\"}),\"Reload\")))));}}]);return ItemPageList;}(Component);var mapStateToProps=function mapStateToProps(state){return{deleteData:state.deletedItemById.data,deleteError:state.deletedItemById.error,data:state.findItems.data||[],loading:state.findItems.loading||state.deletedItemById.loading,error:state.findItems.error};};var mapDispatchToProps={findAll:findAll,deletedById:deletedById};export default withStyles(styles,{withTheme:true})(connect(mapStateToProps,mapDispatchToProps)(ItemPageList));","map":{"version":3,"sources":["/home/aditya/Documents/github/bootcamp/ReactJS/web-client/src/scenes/item/ItemListPage.js"],"names":["React","Component","Header","MUIDataTable","findAll","deletedById","Container","connect","CircularProgress","withStyles","styles","ItemPageList","props","onReload","reload","state","table","onRowClick","rowData","history","push","onAdd","onChangeRowsPerPage","numbersOfRow","setState","size","onChangePage","currentPage","search","name","onSearchChange","searchText","onColumnSortChange","changedColumn","direction","sort","onRowsDelete","rowsDeleted","list","data","e","index","id","total","page","error","prevProps","prevState","deleteData","deleteError","classes","loading","columns","label","options","sortDirection","serverSide","filter","count","rowsPerPage","rowsPerPageOptions","selectableRows","textLabels","body","noMatch","boxSizing","buttonContainer","mapStateToProps","deletedItemById","findItems","mapDispatchToProps","withTheme"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport Header from \"../../component/header\";\nimport MUIDataTable from \"mui-datatables\";\nimport { findAll, deletedById } from \"../../action/items\";\nimport { Container } from \"semantic-ui-react\";\nimport { connect } from \"react-redux\";\nimport { CircularProgress, withStyles } from \"@material-ui/core\";\nimport styles from \"./styles\";\n\nclass ItemPageList extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      data: [],\n      total: 0,\n      table: {\n        sort: \"asc\",\n        size: 20,\n        page: 0,\n        search: {\n          name: \"\"\n        }\n      },\n      error: null\n    };\n  }\n\n  onReload = () => {\n    this.reload();\n  };\n\n  reload = () => {\n    this.props.findAll(this.state.table);\n  };\n\n  onRowClick = rowData => {\n    this.props.history.push(`/items/${rowData[0]}`);\n  };\n\n  onAdd = () => {\n    this.props.history.push(`/items/add`);\n  };\n\n  componentDidMount() {\n    this.reload();\n  }\n\n  onChangeRowsPerPage = numbersOfRow => {\n    const { table } = this.state;\n    this.setState({ table: { ...table, size: numbersOfRow } });\n  };\n\n  componentDidUpdate(prevProps, prevState) {\n    const { deleteData, deleteError, error, data } = this.props;\n    const { table } = this.state;\n\n    if (prevProps.data !== data) {\n      this.setState({ data: data.list, total: data.total });\n    } else if (\n      prevState.table !== table ||\n      prevProps.deleteData !== deleteData\n    ) {\n      this.reload();\n    } else if (deleteError && prevProps.deleteError !== deleteError) {\n      this.setState({ error: deleteError });\n    } else if (error && prevProps.error !== error) {\n      this.setState({ error: error });\n    }\n  }\n\n  onChangePage = currentPage => {\n    const { table } = this.state;\n    this.setState({ table: { ...table, search: { name: currentPage } } });\n  };\n\n  onSearchChange = searchText => {\n    const { table } = this.state;\n    this.setState({ table: { ...table, search: { name: searchText } } });\n  };\n\n  onColumnSortChange = (changedColumn, direction) => {\n    const { table } = this.state;\n    const sort = direction === \"descending\" ? \"desc\" : \"asc\";\n    this.setState({ table: { ...table, sort } });\n  };\n\n  onRowsDelete = rowsDeleted => {\n    const { list } = this.props.data;\n    const e = list[rowsDeleted.data[0].index];\n    this.props.deletedById(e.id);\n    return false;\n  };\n\n  render() {\n    const { classes, loading } = this.props;\n    const { data, total, error, table } = this.state;\n\n    const columns = [\n      {\n        name: \"id\",\n        label: \"ID\",\n        options: {\n          sortDirection: table.sort\n        }\n      },\n      {\n        name: \"name\",\n        label: \"Name\",\n        options: {\n          sort: false\n        }\n      }\n    ];\n\n    const options = {\n      serverSide: true,\n      page: table.page,\n      filter: false,\n      count: total,\n      onRowsDelete: this.onRowsDelete,\n      onRowClick: this.onRowClick,\n      rowsPerPage: table.size,\n      rowsPerPageOptions: [5, 10, 25, 50, 100],\n      onChangeRowsPerPage: this.onChangeRowsPerPage,\n      onChangePage: this.onChangePage,\n      onSearchChange: this.onSearchChange,\n      onColumnSortChange: this.onColumnSortChange,\n      searchText: table.search.name,\n      selectableRows: \"single\",\n      textLabels: {\n        body: {\n          noMatch: loading ? (\n            <CircularProgress />\n          ) : (\n            \"Sorry, no matching records found\"\n          )\n        }\n      }\n    };\n\n    return (\n      <div>\n        <Header error={error}>\n          <Container>\n            <div\n              className=\"ui button\"\n              data-inverted=\"\"\n              data-tooltip=\"Add your data\"\n              data-position=\"left center\"\n              onClick={this.onAdd}\n              className=\"ui orange button\"\n            >\n              <i className=\"plus square outline icon\"></i>\n              New Item\n            </div>\n            <div style={{ boxSizing: \"content-box\" }}>\n              <MUIDataTable\n                error={error}\n                title={\"Items List\"}\n                data={!loading ? data : []}\n                columns={columns}\n                options={options}\n              />\n            </div>\n            <div className={classes.buttonContainer}>\n              <button\n                className=\"ui orange button\"\n                onClick={this.reload}\n                disabled={loading}\n              >\n                <i className=\"sync icon\"></i>Reload\n              </button>\n            </div>\n          </Container>\n        </Header>\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = state => ({\n  deleteData: state.deletedItemById.data,\n  deleteError: state.deletedItemById.error,\n  data: state.findItems.data || [],\n  loading: state.findItems.loading || state.deletedItemById.loading,\n  error: state.findItems.error\n});\n\nconst mapDispatchToProps = {\n  findAll,\n  deletedById\n};\n\nexport default withStyles(styles, { withTheme: true })(\n  connect(mapStateToProps, mapDispatchToProps)(ItemPageList)\n);\n"]},"metadata":{},"sourceType":"module"}
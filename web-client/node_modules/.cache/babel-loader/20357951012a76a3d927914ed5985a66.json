{"ast":null,"code":"import _objectSpread from\"/home/aditya/Documents/github/bootcamp/ReactJS/web-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"/home/aditya/Documents/github/bootcamp/ReactJS/web-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/aditya/Documents/github/bootcamp/ReactJS/web-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _createSuper from\"/home/aditya/Documents/github/bootcamp/ReactJS/web-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import _inherits from\"/home/aditya/Documents/github/bootcamp/ReactJS/web-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component}from\"react\";import Header from\"../../../component/header\";import MUIDataTable from\"mui-datatables\";import{showSummary}from\"../../../action/stocks\";import{Container}from\"semantic-ui-react\";import{connect}from\"react-redux\";import{CircularProgress,withStyles}from\"@material-ui/core\";import styles from\"./styles\";var StockSummary=/*#__PURE__*/function(_Component){_inherits(StockSummary,_Component);var _super=_createSuper(StockSummary);function StockSummary(props){var _this;_classCallCheck(this,StockSummary);_this=_super.call(this,props);_this.onBack=function(event){event.preventDefault();var history=_this.props.history;history.push(\"/stocks\");};_this.onReload=function(){_this.reload();};_this.reload=function(){_this.props.showSummary(_this.state.table);};_this.onChangeRowsPerPage=function(numbersOfRow){var table=_this.state.table;_this.setState({table:_objectSpread({},table,{size:numbersOfRow})});};_this.onChangePage=function(currentPage){var table=_this.state.table;_this.setState({table:_objectSpread({},table,{search:{item:currentPage}})});};_this.onSearchChange=function(searchText){var table=_this.state.table;_this.setState({table:_objectSpread({},table,{search:{item:searchText}})});};_this.onColumnSortChange=function(changedColumn,direction){var table=_this.state.table;var sort=direction===\"descending\"?\"desc\":\"asc\";_this.setState({table:_objectSpread({},table,{sort:sort})});};_this.state={data:[],total:0,table:{sort:\"asc\",size:100,page:0,search:{item:\"\"}},error:null};return _this;}_createClass(StockSummary,[{key:\"componentDidMount\",value:function componentDidMount(){this.reload();}},{key:\"componentDidUpdate\",value:function componentDidUpdate(prevProps,prevState){var _this$props=this.props,deleteData=_this$props.deleteData,deleteError=_this$props.deleteError,error=_this$props.error,data=_this$props.data;var table=this.state.table;console.log(data);if(prevProps.data!==data){this.setState({data:data,total:data.total});}else if(prevState.table!==table||prevProps.deleteData!==deleteData){this.reload();}else if(deleteError&&prevProps.deleteError!==deleteError){this.setState({error:deleteError});}else if(error&&prevProps.error!==error){this.setState({error:error});}}},{key:\"render\",value:function render(){var _this$props2=this.props,classes=_this$props2.classes,loading=_this$props2.loading;var _this$state=this.state,data=_this$state.data,total=_this$state.total,error=_this$state.error,table=_this$state.table;var columns=[{name:\"name\",label:\"Name\",options:{sortDirection:table.sort}},{name:\"quantity\",label:\"Quantity\",options:{sort:false}}];var options={serverSide:true,page:table.page,filter:false,count:total,onRowsDelete:this.onRowsDelete,onRowClick:this.onRowClick,rowsPerPage:table.size,rowsPerPageOptions:[1,2,3,5,10],onChangeRowsPerPage:this.onChangeRowsPerPage,onChangePage:this.onChangePage,onSearchChange:this.onSearchChange,onColumnSortChange:this.onColumnSortChange,searchText:table.search.name,selectableRows:\"single\",textLabels:{body:{noMatch:loading?/*#__PURE__*/React.createElement(CircularProgress,null):\"Sorry, no matching records found\"}}};return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Header,null,/*#__PURE__*/React.createElement(Container,{error:error},/*#__PURE__*/React.createElement(\"div\",{style:{boxSizing:\"content-box\"}},/*#__PURE__*/React.createElement(MUIDataTable,{error:error,title:\"Stock Summary\",data:!loading?data:[],columns:columns,options:options})),/*#__PURE__*/React.createElement(\"div\",{className:classes.buttonContainer},/*#__PURE__*/React.createElement(\"button\",{className:\"ui orange button\",onClick:this.onBack},/*#__PURE__*/React.createElement(\"i\",{class:\"reply all icon\"}),\"Back\")))));}}]);return StockSummary;}(Component);var mapStateToProps=function mapStateToProps(state){return{data:state.showSummary.data||[],loading:state.showSummary.loading,error:state.showSummary.error};};var mapDispatchToProps={showSummary:showSummary};export default withStyles(styles,{withTheme:true})(connect(mapStateToProps,mapDispatchToProps)(StockSummary));","map":{"version":3,"sources":["/home/aditya/Documents/github/bootcamp/ReactJS/web-client/src/scenes/stock/summary/StockSummary.js"],"names":["React","Component","Header","MUIDataTable","showSummary","Container","connect","CircularProgress","withStyles","styles","StockSummary","props","onBack","event","preventDefault","history","push","onReload","reload","state","table","onChangeRowsPerPage","numbersOfRow","setState","size","onChangePage","currentPage","search","item","onSearchChange","searchText","onColumnSortChange","changedColumn","direction","sort","data","total","page","error","prevProps","prevState","deleteData","deleteError","console","log","classes","loading","columns","name","label","options","sortDirection","serverSide","filter","count","onRowsDelete","onRowClick","rowsPerPage","rowsPerPageOptions","selectableRows","textLabels","body","noMatch","boxSizing","buttonContainer","mapStateToProps","mapDispatchToProps","withTheme"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport Header from \"../../../component/header\";\nimport MUIDataTable from \"mui-datatables\";\nimport { showSummary } from \"../../../action/stocks\";\nimport { Container } from \"semantic-ui-react\";\nimport { connect } from \"react-redux\";\nimport { CircularProgress, withStyles } from \"@material-ui/core\";\nimport styles from \"./styles\";\n\nclass StockSummary extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      data: [],\n      total: 0,\n      table: {\n        sort: \"asc\",\n        size: 100,\n        page: 0,\n        search: {\n          item: \"\"\n        }\n      },\n      error: null\n    };\n  }\n\n  onBack = event => {\n    event.preventDefault();\n    const { history } = this.props;\n    history.push(\"/stocks\");\n  };\n\n  onReload = () => {\n    this.reload();\n  };\n\n  reload = () => {\n    this.props.showSummary(this.state.table);\n  };\n\n  componentDidMount() {\n    this.reload();\n  }\n\n  onChangeRowsPerPage = numbersOfRow => {\n    const { table } = this.state;\n    this.setState({ table: { ...table, size: numbersOfRow } });\n  };\n\n  componentDidUpdate(prevProps, prevState) {\n    const { deleteData, deleteError, error, data } = this.props;\n    const { table } = this.state;\n    console.log(data);\n\n    if (prevProps.data !== data) {\n      this.setState({ data: data, total: data.total });\n    } else if (\n      prevState.table !== table ||\n      prevProps.deleteData !== deleteData\n    ) {\n      this.reload();\n    } else if (deleteError && prevProps.deleteError !== deleteError) {\n      this.setState({ error: deleteError });\n    } else if (error && prevProps.error !== error) {\n      this.setState({ error: error });\n    }\n  }\n\n  onChangePage = currentPage => {\n    const { table } = this.state;\n    this.setState({ table: { ...table, search: { item: currentPage } } });\n  };\n\n  onSearchChange = searchText => {\n    const { table } = this.state;\n    this.setState({ table: { ...table, search: { item: searchText } } });\n  };\n\n  onColumnSortChange = (changedColumn, direction) => {\n    const { table } = this.state;\n    const sort = direction === \"descending\" ? \"desc\" : \"asc\";\n    this.setState({ table: { ...table, sort } });\n  };\n\n  render() {\n    const { classes, loading } = this.props;\n    const { data, total, error, table } = this.state;\n\n    const columns = [\n      {\n        name: \"name\",\n        label: \"Name\",\n        options: {\n          sortDirection: table.sort\n        }\n      },\n      {\n        name: \"quantity\",\n        label: \"Quantity\",\n        options: {\n          sort: false\n        }\n      }\n    ];\n\n    const options = {\n      serverSide: true,\n      page: table.page,\n      filter: false,\n      count: total,\n      onRowsDelete: this.onRowsDelete,\n      onRowClick: this.onRowClick,\n      rowsPerPage: table.size,\n      rowsPerPageOptions: [1, 2, 3, 5, 10],\n      onChangeRowsPerPage: this.onChangeRowsPerPage,\n      onChangePage: this.onChangePage,\n      onSearchChange: this.onSearchChange,\n      onColumnSortChange: this.onColumnSortChange,\n      searchText: table.search.name,\n      selectableRows: \"single\",\n      textLabels: {\n        body: {\n          noMatch: loading ? (\n            <CircularProgress />\n          ) : (\n            \"Sorry, no matching records found\"\n          )\n        }\n      }\n    };\n    return (\n      <div>\n        <Header>\n          <Container error={error}>\n            <div style={{ boxSizing: \"content-box\" }}>\n              <MUIDataTable\n                error={error}\n                title={\"Stock Summary\"}\n                data={!loading ? data : []}\n                columns={columns}\n                options={options}\n              />\n            </div>\n            <div className={classes.buttonContainer}>\n              <button className=\"ui orange button\" onClick={this.onBack}>\n                <i class=\"reply all icon\"></i>\n                Back\n              </button>\n            </div>\n          </Container>\n        </Header>\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = state => ({\n  data: state.showSummary.data || [],\n  loading: state.showSummary.loading,\n  error: state.showSummary.error\n});\n\nconst mapDispatchToProps = {\n  showSummary\n};\n\nexport default withStyles(styles, { withTheme: true })(\n  connect(mapStateToProps, mapDispatchToProps)(StockSummary)\n);\n"]},"metadata":{},"sourceType":"module"}